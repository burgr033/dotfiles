#!/bin/bash

{{ if eq .chezmoi.osRelease.idLike "debian" -}}
#DEBIAN

#lazygit
if ! command -v lazygit &> /dev/null
  then
    LAZYGIT_VERSION=$(curl -s "https://api.github.com/repos/jesseduffield/lazygit/releases/latest" | grep -Po '"tag_name": "v\K[^"]*')
    curl -Lo lazygit.tar.gz "https://github.com/jesseduffield/lazygit/releases/latest/download/lazygit_${LAZYGIT_VERSION}_Linux_x86_64.tar.gz"
    tar xf lazygit.tar.gz lazygit
    install lazygit ~/.local/bin
    rm lazygit.tar.gz lazygit
  fi

sudo apt update
sudo apt install python3-dev python3-pip python3-setuptools htop fzf bat gdu python3-pynvim zsh tree -y

{{ if eq .chezmoi.osRelease.id "ubuntu" -}}
printf "installing neovim via snap, because ubuntu... please type password"
sudo snap install neovim --classic
{{ end -}}

{{ end -}}

{{ if eq .chezmoi.osRelease.idLike "arch" -}}
#ARCH
sudo pacman --needed --noconfirm -Sy zsh fzf bat neovim gdu bottom lazygit tree htop python python-pip tree
{{ end -}}

{{ if eq .chezmoi.osRelease.idLike "rhel" -}}
#CENTOS
{{ end -}}

#COMMON
printf "Password for sudo pip install ansible"
sudo pip install ansible
pip install virtualenvwrapper --user
pip install thefuck --user
